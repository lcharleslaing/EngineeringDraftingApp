<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Process Print</title>
  <link href="https://cdn.tailwindcss.com" rel="preload" as="style" onload="this.rel='stylesheet'">
  <style>
    .img-print{max-width:100%;width:100%;height:auto;page-break-inside:avoid;break-inside:avoid;}
    .img-grid{display:grid;grid-template-columns:1fr;gap:0.5rem;}
    @media (min-width:768px){ .img-grid{grid-template-columns:1fr;} }
    @media print{ .img-grid{grid-template-columns:1fr;} }
  </style>
</head>
<body class="p-8">
  {% for p in processes %}
    <section class="mb-10 break-inside-avoid">
      <h1 class="text-3xl font-bold mb-2">{{ p.name }}</h1>
      {% if p.description %}<p class="mb-4">{{ p.description|linebreaksbr }}</p>{% endif %}
      <ol class="list-decimal ml-6 space-y-2">
        {% for step in p.steps.all %}
          <li>
            <div class="font-semibold">{{ step.title }}</div>
            {% if step.details %}<div class="opacity-80">{{ step.details|linebreaksbr }}</div>{% endif %}
            {% if step.images.all %}
              <div class="img-grid mt-2">
                {% for img in step.images.all %}
                  <img src="{{ img.image.url }}" class="rounded border img-print" />
                {% endfor %}
              </div>
            {% endif %}
          </li>
        {% endfor %}
      </ol>
      {% if p.notes %}<h2 class="text-xl font-semibold mt-6">Notes</h2><p>{{ p.notes|linebreaksbr }}</p>{% endif %}
    </section>
  {% endfor %}
  <script>window.print()</script>
</body>
</html>


